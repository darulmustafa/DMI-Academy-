
<!doctype html>
<html lang="bn" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ржнрж░рзНрждрж┐ ржлрж░ржо | Admission Form - ржжрж╛рж░рзБрж▓ ржорзЛрж╕рзНрждржлрж╛ рж╕рж╛ржГ ржЗрж╕рж▓рж╛ржорзА ржПржХрж╛ржбрзЗржорж┐</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&amp;family=Poppins:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-green: #0d6e3f;
      --secondary-gold: #c9a227;
      --dark-text: #1a1a2e;
      --light-bg: #f8f9fa;
      --card-bg: #ffffff;
    }
    
    * {
      font-family: 'Hind Siliguri', 'Poppins', sans-serif;
    }
    
    .font-bengali {
      font-family: 'Hind Siliguri', sans-serif;
    }
    
    .font-english {
      font-family: 'Poppins', sans-serif;
    }
    
    .form-section {
      background: linear-gradient(135deg, #ffffff 0%, #f8fdf9 100%);
      border-left: 4px solid var(--primary-green);
    }
    
    .input-field {
      transition: all 0.3s ease;
      border: 1px solid #e2e8f0;
    }
    
    .input-field:focus {
      border-color: var(--primary-green);
      box-shadow: 0 0 0 3px rgba(13, 110, 63, 0.1);
    }
    
    .required-star {
      color: #dc2626;
    }
    
    .step-indicator {
      transition: all 0.3s ease;
    }
    
    .step-indicator.active {
      background: var(--primary-green);
      color: white;
    }
    
    .step-indicator.completed {
      background: var(--secondary-gold);
      color: white;
    }
    
    .photo-upload-zone {
      border: 2px dashed #cbd5e1;
      transition: all 0.3s ease;
    }
    
    .photo-upload-zone:hover {
      border-color: var(--primary-green);
      background: rgba(13, 110, 63, 0.05);
    }
    
    .photo-upload-zone.has-photo {
      border-style: solid;
      border-color: var(--primary-green);
    }
    
    @media print {
      body {
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      
      .no-print {
        display: none !important;
      }
      
      .print-only {
        display: block !important;
      }
      
      .print-voucher {
        box-shadow: none !important;
        border: 2px solid #000 !important;
        page-break-inside: avoid;
      }
      
      .print-header {
        background: linear-gradient(135deg, #0d6e3f 0%, #1a8f5c 100%) !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      
      .print-table td, .print-table th {
        border: 1px solid #000 !important;
        padding: 8px !important;
      }
      
      .print-photo {
        width: 120px !important;
        height: 150px !important;
        border: 2px solid #000 !important;
      }
    }
    
    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid var(--primary-green);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .toast {
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full bg-gradient-to-br from-emerald-50 via-white to-amber-50">
  <div id="app" class="h-full overflow-auto"><!-- Toast Container -->
   <div id="toast-container" class="fixed top-4 right-4 z-50"></div><!-- Main Form Container -->
   <div id="form-container" class="max-w-5xl mx-auto p-4 md:p-6"><!-- Header -->
    <header class="bg-gradient-to-r from-emerald-800 via-emerald-700 to-emerald-800 rounded-t-2xl p-6 text-white shadow-xl">
     <div class="flex flex-col md:flex-row items-center gap-4"><!-- Logo SVG -->
      <div class="w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-lg">
       <svg viewbox="0 0 100 100" class="w-14 h-14">
  <circle cx="50" cy="50" r="45" fill="#0d6e3f" stroke="#c9a227" stroke-width="3" /> 
  
  <path d="M50 5 L50 15 M50 85 L50 95 M5 50 L15 50 M85 50 L95 50" stroke="#c9a227" stroke-width="2" /> 
  
  <circle cx="50" cy="50" r="35" fill="#ffffff" stroke="#c9a227" stroke-width="2" /> 

  <defs>
    <clipPath id="circleView">
      <circle cx="50" cy="50" r="34" />
    </clipPath>
  </defs>
  
  <image 
    xlink:href="logo.jpg" 
    x="15" y="15" 
    height="70" width="70" 
    clip-path="url(#circleView)"
    preserveAspectRatio="xMidYMid slice"
  />
       </svg>
      </div>
      <div class="text-center md:text-left flex-1">
       <h1 class="text-2xl md:text-3xl font-bold font-bengali" id="header-title">ржжрж╛рж░рзБрж▓ ржорзЛрж╕рзНрждржлрж╛ рж╕рж╛ржГ ржЗрж╕рж▓рж╛ржорзА ржПржХрж╛ржбрзЗржорж┐</h1>
       <p class="text-emerald-100 font-english text-sm md:text-base">Darul Mustafa (SAW) Islamic Academy</p>
       <p class="text-emerald-200 text-sm mt-1 font-bengali">ржкрж╛ржерж░ ржкрж╛ржбрж╝рж╛, ржмрж╛ржЗрждрзБрж▓ ржорж╛ржорзБрж░ ржЬрж╛ржорзЗ ржорж╕ржЬрж┐ржж рж╕ржВрж▓ржЧрзНржи, ржоржЫржЬрж┐ржжрзНржжрж╛, рж╕рзАрждрж╛ржХрзБржгрзНржб, ржЪржЯрзНржЯржЧрзНрж░рж╛ржо</p>
       <p class="text-amber-300 text-sm font-bengali">рж╕рзНржерж╛ржкрж┐рждржГ рзирзжрзирзл</p>
      </div>
      <div class="text-center bg-white/10 px-4 py-2 rounded-lg">
       <p class="text-amber-300 font-bold text-lg font-bengali">ржнрж░рзНрждрж┐ ржлрж░ржо</p>
       <p class="text-emerald-100 text-sm font-english">Admission Form</p>
      </div>
     </div>
    </header><!-- Form Number & Date -->
    <div class="bg-amber-50 border-b border-amber-200 px-6 py-3 flex flex-wrap justify-between items-center gap-2">
     <div class="flex items-center gap-2"><span class="font-bengali text-emerald-800">ржлрж░ржо ржиржорзНржмрж░:</span> <span id="form-number" class="font-bold text-emerald-700 bg-white px-3 py-1 rounded">001</span>
     </div>
     <div class="flex items-center gap-2"><span class="font-bengali text-emerald-800">рждрж╛рж░рж┐ржЦ:</span> <input type="date" id="submission-date" class="input-field px-3 py-1 rounded text-sm" required>
     </div>
    </div><!-- Step Indicators -->
    <div class="bg-white px-6 py-4 border-b flex flex-wrap justify-center gap-2 no-print"><button onclick="goToStep(1)" class="step-indicator active px-4 py-2 rounded-full text-sm font-medium" data-step="1"> рзз. ржорзМрж▓рж┐ржХ рждржерзНржп </button> <button onclick="goToStep(2)" class="step-indicator px-4 py-2 rounded-full text-sm font-medium bg-gray-200" data-step="2"> рзи. ржЕржнрж┐ржнрж╛ржмржХ </button> <button onclick="goToStep(3)" class="step-indicator px-4 py-2 rounded-full text-sm font-medium bg-gray-200" data-step="3"> рзй. ржарж┐ржХрж╛ржирж╛ </button> <button onclick="goToStep(4)" class="step-indicator px-4 py-2 rounded-full text-sm font-medium bg-gray-200" data-step="4"> рзк. рж╢рж┐ржХрзНрж╖рж╛ рждржерзНржп </button> <button onclick="goToStep(5)" class="step-indicator px-4 py-2 rounded-full text-sm font-medium bg-gray-200" data-step="5"> рзл. ржЕржлрж┐рж╕ </button>
    </div><!-- Form Body -->
    <form id="admission-form" class="bg-white rounded-b-2xl shadow-xl overflow-hidden"><!-- Step 1: Basic Info -->
     <div id="step-1" class="form-step p-6">
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-emerald-700 text-white rounded-full flex items-center justify-center text-sm">рзз</span> рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАрж░ ржорзМрж▓рж┐ржХ рждржерзНржп | Basic Information</h2>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><!-- Photo Upload -->
        <div class="md:row-span-3"><label class="block text-sm font-medium text-gray-700 mb-2 font-bengali"> ржЫржмрж┐ <span class="required-star">*</span> | Photo </label>
         <div id="photo-upload-zone" class="photo-upload-zone rounded-xl p-4 text-center cursor-pointer h-48 flex flex-col items-center justify-center" onclick="document.getElementById('photo-input').click()">
          <div id="photo-preview-container" class="hidden w-full h-full"><img id="photo-preview" class="w-full h-full object-cover rounded-lg" alt="Student Photo">
          </div>
          <div id="photo-placeholder" class="text-gray-400">
           <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
           </svg>
           <p class="text-sm font-bengali">ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзБржи</p>
           <p class="text-xs text-gray-400">Click to upload</p>
          </div>
         </div><input type="file" id="photo-input" accept="image/*" class="hidden" onchange="handlePhotoUpload(event)">
        </div><!-- Student Name Bengali -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАрж░ ржирж╛ржо (ржмрж╛ржВрж▓рж╛ржпрж╝) </label> <input type="text" id="student-name-bn" class="input-field w-full px-4 py-2 rounded-lg font-bengali" placeholder="ржмрж╛ржВрж▓рж╛ржпрж╝ ржирж╛ржо рж▓рж┐ржЦрзБржи">
        </div><!-- Student Name English -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-english"> Student Name (English) </label> <input type="text" id="student-name-en" class="input-field w-full px-4 py-2 rounded-lg font-english" placeholder="Name in English">
        </div><!-- Date of Birth -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> ржЬржирзНржо рждрж╛рж░рж┐ржЦ <span class="required-star">*</span> </label> <input type="date" id="date-of-birth" class="input-field w-full px-4 py-2 rounded-lg" required>
        </div><!-- Birth Registration -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> ржЬржирзНржо ржирж┐ржмржирзНржзржи ржиржорзНржмрж░ </label> <input type="text" id="birth-reg-no" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Birth Registration No">
        </div><!-- Gender -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> рж▓рж┐ржЩрзНржЧ <span class="required-star">*</span> </label> <select id="gender" class="input-field w-full px-4 py-2 rounded-lg" required> <option value="">-- ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --</option> <option value="male">ржкрзБрж░рзБрж╖ | Male</option> <option value="female">ржорж╣рж┐рж▓рж╛ | Female</option> </select>
        </div><!-- Religion -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> ржзрж░рзНржо </label> <input type="text" id="religion" class="input-field w-full px-4 py-2 rounded-lg" value="ржЗрж╕рж▓рж╛ржо" readonly>
        </div><!-- Nationality -->
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali"> ржЬрж╛рждрзАржпрж╝рждрж╛ </label> <input type="text" id="nationality" class="input-field w-full px-4 py-2 rounded-lg" value="ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзА" readonly>
        </div>
       </div>
      </div>
      <div class="flex justify-end"><button type="button" onclick="nextStep()" class="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2"> ржкрж░ржмрж░рзНрждрзА 
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg></button>
      </div>
     </div><!-- Step 2: Parents Info -->
     <div id="step-2" class="form-step p-6 hidden"><!-- Father's Details -->
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-emerald-700 text-white rounded-full flex items-center justify-center text-sm">рзи</span> ржкрж┐рждрж╛рж░ рждржерзНржп | Father's Details</h2>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржкрж┐рждрж╛рж░ ржирж╛ржо (ржмрж╛ржВрж▓рж╛ржпрж╝)</label> <input type="text" id="father-name-bn" class="input-field w-full px-4 py-2 rounded-lg font-bengali" placeholder="ржмрж╛ржВрж▓рж╛ржпрж╝ ржирж╛ржо">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-english">Father's Name (English)</label> <input type="text" id="father-name-en" class="input-field w-full px-4 py-2 rounded-lg font-english" placeholder="Name in English">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржкрзЗрж╢рж╛ | Occupation</label> <input type="text" id="father-occupation" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Occupation">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ <span class="required-star">*</span></label> <input type="tel" id="father-mobile" class="input-field w-full px-4 py-2 rounded-lg" placeholder="01XXXXXXXXX" required>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬрж╛рждрзАржпрж╝ ржкрж░рж┐ржЪржпрж╝ржкрждрзНрж░ ржиржорзНржмрж░</label> <input type="text" id="father-nid" class="input-field w-full px-4 py-2 rounded-lg" placeholder="NID Number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬржирзНржо рждрж╛рж░рж┐ржЦ (NID ржЕржирзБржпрж╛ржпрж╝рзА)</label> <input type="date" id="father-dob" class="input-field w-full px-4 py-2 rounded-lg">
        </div>
       </div>
      </div><!-- Mother's Details -->
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-amber-600 text-white rounded-full flex items-center justify-center text-sm">рзй</span> ржорж╛рждрж╛рж░ рждржерзНржп | Mother's Details</h2>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржорж╛рждрж╛рж░ ржирж╛ржо (ржмрж╛ржВрж▓рж╛ржпрж╝)</label> <input type="text" id="mother-name-bn" class="input-field w-full px-4 py-2 rounded-lg font-bengali" placeholder="ржмрж╛ржВрж▓рж╛ржпрж╝ ржирж╛ржо">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-english">Mother's Name (English)</label> <input type="text" id="mother-name-en" class="input-field w-full px-4 py-2 rounded-lg font-english" placeholder="Name in English">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржкрзЗрж╢рж╛ | Occupation</label> <input type="text" id="mother-occupation" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Occupation">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ <span class="required-star">*</span></label> <input type="tel" id="mother-mobile" class="input-field w-full px-4 py-2 rounded-lg" placeholder="01XXXXXXXXX" required>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬрж╛рждрзАржпрж╝ ржкрж░рж┐ржЪржпрж╝ржкрждрзНрж░ ржиржорзНржмрж░</label> <input type="text" id="mother-nid" class="input-field w-full px-4 py-2 rounded-lg" placeholder="NID Number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬржирзНржо рждрж╛рж░рж┐ржЦ (NID ржЕржирзБржпрж╛ржпрж╝рзА)</label> <input type="date" id="mother-dob" class="input-field w-full px-4 py-2 rounded-lg">
        </div>
       </div>
      </div><!-- Guardian Details -->
      <div class="form-section rounded-xl p-5 mb-6 bg-amber-50/50">
       <h2 class="text-lg font-bold text-amber-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-amber-600 text-white rounded-full flex items-center justify-center text-sm">тЪб</span> ржЕржнрж┐ржнрж╛ржмржХрзЗрж░ рждржерзНржп (ржкрж┐рждрж╛рж░ ржЕржирзБржкрж╕рзНржерж┐рждрж┐рждрзЗ) | Guardian Info</h2>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЕржнрж┐ржнрж╛ржмржХрзЗрж░ ржирж╛ржо</label> <input type="text" id="guardian-name" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Guardian Name">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж╕ржорзНржкрж░рзНржХ | Relation</label> <select id="guardian-relation" class="input-field w-full px-4 py-2 rounded-lg"> <option value="">-- ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --</option> <option value="uncle">ржЪрж╛ржЪрж╛/ржорж╛ржорж╛ | Uncle</option> <option value="grandfather">ржжрж╛ржжрж╛/ржирж╛ржирж╛ | Grandfather</option> <option value="brother">ржнрж╛ржЗ | Brother</option> <option value="other">ржЕржирзНржпрж╛ржирзНржп | Other</option> </select>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржкрзЗрж╢рж╛</label> <input type="text" id="guardian-occupation" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Occupation">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬрж╛рждрзАржпрж╝ ржкрж░рж┐ржЪржпрж╝ржкрждрзНрж░ ржиржорзНржмрж░</label> <input type="text" id="guardian-nid" class="input-field w-full px-4 py-2 rounded-lg" placeholder="NID Number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬржирзНржо рждрж╛рж░рж┐ржЦ</label> <input type="date" id="guardian-dob" class="input-field w-full px-4 py-2 rounded-lg">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░</label> <input type="tel" id="guardian-mobile" class="input-field w-full px-4 py-2 rounded-lg" placeholder="01XXXXXXXXX">
        </div>
       </div>
      </div>
      <div class="flex justify-between"><button type="button" onclick="prevStep()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg> ржкрзВрж░рзНржмржмрж░рзНрждрзА </button> <button type="button" onclick="nextStep()" class="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2"> ржкрж░ржмрж░рзНрждрзА 
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg></button>
      </div>
     </div><!-- Step 3: Address -->
     <div id="step-3" class="form-step p-6 hidden"><!-- Permanent Address -->
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-emerald-700 text-white rounded-full flex items-center justify-center text-sm">ЁЯУН</span> рж╕рзНржерж╛ржпрж╝рзА ржарж┐ржХрж╛ржирж╛ | Permanent Address</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЧрзНрж░рж╛ржо/ржорж╣рж▓рзНрж▓рж╛</label> <input type="text" id="permanent-village" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Village/Mohalla">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржбрж╛ржХржШрж░</label> <input type="text" id="permanent-po" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Post Office">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЙржкржЬрзЗрж▓рж╛</label> <input type="text" id="permanent-upazila" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Upazila">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬрзЗрж▓рж╛</label> <input type="text" id="permanent-district" class="input-field w-full px-4 py-2 rounded-lg" placeholder="District">
        </div>
       </div>
      </div><!-- Current Address -->
      <div class="form-section rounded-xl p-5 mb-6">
       <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-bold text-emerald-800 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-amber-600 text-white rounded-full flex items-center justify-center text-sm">ЁЯПа</span> ржмрж░рзНрждржорж╛ржи ржарж┐ржХрж╛ржирж╛ | Current Address</h2><label class="flex items-center gap-2 text-sm cursor-pointer"> <input type="checkbox" id="same-as-permanent" onchange="copyPermanentAddress()" class="w-4 h-4 text-emerald-600 rounded"> <span class="font-bengali">рж╕рзНржерж╛ржпрж╝рзА ржарж┐ржХрж╛ржирж╛рж░ ржЕржирзБрж░рзВржк</span> </label>
       </div>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЧрзНрж░рж╛ржо/ржорж╣рж▓рзНрж▓рж╛</label> <input type="text" id="current-village" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Village/Mohalla">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржбрж╛ржХржШрж░</label> <input type="text" id="current-po" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Post Office">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЙржкржЬрзЗрж▓рж╛</label> <input type="text" id="current-upazila" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Upazila">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржЬрзЗрж▓рж╛</label> <input type="text" id="current-district" class="input-field w-full px-4 py-2 rounded-lg" placeholder="District">
        </div>
       </div>
      </div>
      <div class="flex justify-between"><button type="button" onclick="prevStep()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg> ржкрзВрж░рзНржмржмрж░рзНрждрзА </button> <button type="button" onclick="nextStep()" class="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2"> ржкрж░ржмрж░рзНрждрзА 
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg></button>
      </div>
     </div><!-- Step 4: Academic Info -->
     <div id="step-4" class="form-step p-6 hidden"><!-- Previous School -->
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-emerald-700 text-white rounded-full flex items-center justify-center text-sm">ЁЯУЪ</span> ржкрзВрж░рзНржмржмрж░рзНрждрзА рж╢рж┐ржХрзНрж╖рж╛ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ рждржерзНржп | Previous Academic Record</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div class="md:col-span-2"><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржирж╛ржо</label> <input type="text" id="prev-school-name" class="input-field w-full px-4 py-2 rounded-lg" placeholder="School/Madrasa Name">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржарж┐ржХрж╛ржирж╛</label> <input type="text" id="prev-school-address" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Address">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж╢рзНрж░рзЗржгрзА | Class</label> <input type="text" id="prev-class" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Last Class">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж░рзЛрж▓ ржиржорзНржмрж░</label> <input type="text" id="prev-roll" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Roll Number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">TC ржиржорзНржмрж░</label> <input type="text" id="tc-no" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Transfer Certificate No">
        </div>
       </div>
      </div><!-- Additional Info -->
      <div class="form-section rounded-xl p-5 mb-6">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-amber-600 text-white rounded-full flex items-center justify-center text-sm">ЁЯУ▒</span> ржЕрждрж┐рж░рж┐ржХрзНржд рждржерзНржп | Additional Information</h2>
       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж╣рзЛржпрж╝рж╛ржЯрж╕ржЕрзНржпрж╛ржк ржиржорзНржмрж░</label> <input type="tel" id="whatsapp-number" class="input-field w-full px-4 py-2 rounded-lg" placeholder="WhatsApp Number">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржПржЗ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗ ржнрж╛ржЗ/ржмрзЛржи ржЖржЫрзЗ?</label> <select id="siblings-in-school" class="input-field w-full px-4 py-2 rounded-lg"> <option value="no">ржирж╛ | No</option> <option value="yes">рж╣рзНржпрж╛ржБ | Yes</option> </select>
        </div>
       </div>
      </div>
      <div class="flex justify-between"><button type="button" onclick="prevStep()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg> ржкрзВрж░рзНржмржмрж░рзНрждрзА </button> <button type="button" onclick="nextStep()" class="bg-emerald-700 hover:bg-emerald-800 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2"> ржкрж░ржмрж░рзНрждрзА 
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg></button>
      </div>
     </div><!-- Step 5: Office Use -->
     <div id="step-5" class="form-step p-6 hidden">
      <div class="form-section rounded-xl p-5 mb-6 bg-gradient-to-r from-amber-50 to-emerald-50">
       <h2 class="text-lg font-bold text-emerald-800 mb-4 font-bengali flex items-center gap-2"><span class="w-8 h-8 bg-gradient-to-r from-emerald-700 to-amber-600 text-white rounded-full flex items-center justify-center text-sm">ЁЯПл</span> ржЕржлрж┐рж╕ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп | For Office Use Only</h2>
       <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">ржнрж░рзНрждрж┐ржХрзГржд рж╢рзНрж░рзЗржгрзА</label> <select id="admitted-class" class="input-field w-full px-4 py-2 rounded-lg"> <option value="">-- ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --</option> <option value="ржирж╛ржЬрзЗрж░рж╛">ржирж╛ржЬрзЗрж░рж╛</option> <option value="рж╣рж┐ржлржЬ">рж╣рж┐ржлржЬ</option> <option value="рззржо рж╢рзНрж░рзЗржгрзА">рззржо рж╢рзНрж░рзЗржгрзА</option> <option value="рзиржпрж╝ рж╢рзНрж░рзЗржгрзА">рзиржпрж╝ рж╢рзНрж░рзЗржгрзА</option> <option value="рзйржпрж╝ рж╢рзНрж░рзЗржгрзА">рзйржпрж╝ рж╢рзНрж░рзЗржгрзА</option> <option value="рзкрж░рзНрже рж╢рзНрж░рзЗржгрзА">рзкрж░рзНрже рж╢рзНрж░рзЗржгрзА</option> <option value="рзлржо рж╢рзНрж░рзЗржгрзА">рзлржо рж╢рзНрж░рзЗржгрзА</option> </select>
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж╢рж╛ржЦрж╛/ржмрж┐ржнрж╛ржЧ</label> <input type="text" id="section" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Section/Department">
        </div>
        <div><label class="block text-sm font-medium text-gray-700 mb-1 font-bengali">рж░рзЛрж▓ ржиржорзНржмрж░</label> <input type="text" id="assigned-roll" class="input-field w-full px-4 py-2 rounded-lg" placeholder="Assigned Roll No">
        </div>
       </div>
      </div><!-- Declaration -->
      <div class="bg-gray-50 rounded-xl p-5 mb-6 border-2 border-dashed border-gray-300"><label class="flex items-start gap-3 cursor-pointer"> <input type="checkbox" id="declaration" class="w-5 h-5 text-emerald-600 rounded mt-1" required> <span class="text-sm text-gray-700 font-bengali leading-relaxed"> ржЖржорж┐ ржШрзЛрж╖ржгрж╛ ржХрж░ржЫрж┐ ржпрзЗ, ржЙржкрж░рзЗ ржкрзНрж░ржжрждрзНржд рж╕ржорж╕рзНржд рждржерзНржп ржЖржорж╛рж░ ржЬрж╛ржирж╛ржорждрзЗ рж╕рждрзНржп ржУ рж╕ржарж┐ржХред ржЖржорж┐ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ рж╕ржХрж▓ ржирж┐ржпрж╝ржо-ржХрж╛ржирзБржи ржорзЗржирзЗ ржЪрж▓рждрзЗ рж╕ржорзНржоржд ржЖржЫрж┐ред <br><span class="text-gray-500 font-english text-xs">I declare that all information provided above is true and correct to the best of my knowledge. I agree to abide by all rules and regulations of the institution.</span> </span> </label>
      </div>
      <div class="flex justify-between"><button type="button" onclick="prevStep()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg> ржкрзВрж░рзНржмржмрж░рзНрждрзА </button> <button type="submit" id="submit-btn" class="bg-gradient-to-r from-emerald-700 to-emerald-600 hover:from-emerald-800 hover:to-emerald-700 text-white px-10 py-3 rounded-lg font-bold transition-all flex items-center gap-2 shadow-lg"> <span id="submit-text">ржлрж░ржо ржЬржорж╛ ржжрж┐ржи</span>
        <div id="submit-spinner" class="loading-spinner hidden"></div>
        <svg id="submit-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg></button>
      </div>
     </div>
    </form>
   </div><!-- Print Voucher (Hidden until submission) -->
   <div id="print-voucher-container" class="hidden">
    <div class="max-w-4xl mx-auto p-4 no-print"><button onclick="window.print()" class="bg-emerald-700 hover:bg-emerald-800 text-white px-6 py-3 rounded-lg font-medium mb-4 flex items-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
      </svg> ржкрзНрж░рж┐ржирзНржЯ ржХрж░рзБржи | Print Form </button> <button onclick="showNewForm()" class="bg-amber-600 hover:bg-amber-700 text-white px-6 py-3 rounded-lg font-medium mb-4 ml-2"> ржирждрзБржи ржлрж░ржо | New Form </button>
    </div>
    <div id="print-voucher" class="print-voucher bg-white max-w-4xl mx-auto shadow-2xl rounded-xl overflow-hidden mb-8"><!-- Print Header -->
     <div class="print-header bg-gradient-to-r from-emerald-800 via-emerald-700 to-emerald-800 p-6 text-white">
      <div class="flex items-center gap-4">
       <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center">
        <svg viewbox="0 0 100 100" class="w-16 h-16"><circle cx="50" cy="50" r="45" fill="#0d6e3f" stroke="#c9a227" stroke-width="3" /> <path d="M50 15 L50 35 M50 65 L50 85" stroke="#c9a227" stroke-width="2" /> <circle cx="50" cy="50" r="20" fill="none" stroke="#c9a227" stroke-width="2" /> <text x="50" y="55" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold">
          ╪п┘Е
         </text>
        </svg>
       </div>
       <div class="flex-1 text-center">
        <h1 class="text-2xl font-bold font-bengali">ржжрж╛рж░рзБрж▓ ржорзЛрж╕рзНрждржлрж╛ рж╕рж╛ржГ ржЗрж╕рж▓рж╛ржорзА ржПржХрж╛ржбрзЗржорж┐</h1>
        <p class="text-emerald-100 text-sm">Darul Mustafa (SAW) Islamic Academy</p>
        <p class="text-emerald-200 text-xs mt-1">ржкрж╛ржерж░ ржкрж╛ржбрж╝рж╛, ржмрж╛ржЗрждрзБрж▓ ржорж╛ржорзБрж░ ржЬрж╛ржорзЗ ржорж╕ржЬрж┐ржж рж╕ржВрж▓ржЧрзНржи, ржоржЫржЬрж┐ржжрзНржжрж╛, рж╕рзАрждрж╛ржХрзБржгрзНржб, ржЪржЯрзНржЯржЧрзНрж░рж╛ржо</p>
       </div>
       <div class="text-center bg-white/20 px-4 py-2 rounded-lg">
        <p class="text-amber-300 font-bold">ржнрж░рзНрждрж┐ рж░рж╢рж┐ржж</p>
        <p class="text-xs">Admission Voucher</p>
       </div>
      </div>
     </div><!-- Voucher Body -->
     <div class="p-6">
      <div class="flex justify-between items-start mb-6">
       <div>
        <p class="text-sm"><span class="font-bold">ржлрж░ржо ржиржорзНржмрж░:</span> <span id="voucher-form-no" class="text-emerald-700 font-bold">001</span></p>
        <p class="text-sm"><span class="font-bold">рждрж╛рж░рж┐ржЦ:</span> <span id="voucher-date"></span></p>
       </div>
       <div id="voucher-photo" class="print-photo w-28 h-36 border-2 border-gray-300 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center"><span class="text-gray-400 text-xs text-center">Photo</span>
       </div>
      </div><!-- Student Info Table -->
      <table class="print-table w-full border-collapse mb-4 text-sm">
       <thead>
        <tr class="bg-emerald-700 text-white">
         <th colspan="4" class="p-2 text-left font-bengali">рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАрж░ рждржерзНржп | Student Information</th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td class="p-2 font-bold bg-gray-50 w-1/4">ржирж╛ржо (ржмрж╛ржВрж▓рж╛)</td>
         <td class="p-2" id="v-student-name-bn"></td>
         <td class="p-2 font-bold bg-gray-50 w-1/4">Name (English)</td>
         <td class="p-2" id="v-student-name-en"></td>
        </tr>
        <tr>
         <td class="p-2 font-bold bg-gray-50">ржЬржирзНржо рждрж╛рж░рж┐ржЦ</td>
         <td class="p-2" id="v-dob"></td>
         <td class="p-2 font-bold bg-gray-50">рж▓рж┐ржЩрзНржЧ</td>
         <td class="p-2" id="v-gender"></td>
        </tr>
        <tr>
         <td class="p-2 font-bold bg-gray-50">ржЬржирзНржо ржирж┐ржмржирзНржзржи</td>
         <td class="p-2" id="v-birth-reg"></td>
         <td class="p-2 font-bold bg-gray-50">ржЬрж╛рждрзАржпрж╝рждрж╛</td>
         <td class="p-2" id="v-nationality"></td>
        </tr>
       </tbody>
      </table><!-- Parents Info Table -->
      <table class="print-table w-full border-collapse mb-4 text-sm">
       <thead>
        <tr class="bg-amber-600 text-white">
         <th colspan="4" class="p-2 text-left font-bengali">ржЕржнрж┐ржнрж╛ржмржХрзЗрж░ рждржерзНржп | Parents Information</th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td class="p-2 font-bold bg-gray-50 w-1/4">ржкрж┐рждрж╛рж░ ржирж╛ржо</td>
         <td class="p-2" id="v-father-name"></td>
         <td class="p-2 font-bold bg-gray-50 w-1/4">ржорзЛржмрж╛ржЗрж▓</td>
         <td class="p-2" id="v-father-mobile"></td>
        </tr>
        <tr>
         <td class="p-2 font-bold bg-gray-50">ржорж╛рждрж╛рж░ ржирж╛ржо</td>
         <td class="p-2" id="v-mother-name"></td>
         <td class="p-2 font-bold bg-gray-50">ржорзЛржмрж╛ржЗрж▓</td>
         <td class="p-2" id="v-mother-mobile"></td>
        </tr>
       </tbody>
      </table><!-- Address Table -->
      <table class="print-table w-full border-collapse mb-4 text-sm">
       <thead>
        <tr class="bg-emerald-600 text-white">
         <th colspan="2" class="p-2 text-left font-bengali">ржарж┐ржХрж╛ржирж╛ | Address</th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td class="p-2 font-bold bg-gray-50 w-1/4">рж╕рзНржерж╛ржпрж╝рзА ржарж┐ржХрж╛ржирж╛</td>
         <td class="p-2" id="v-permanent-address"></td>
        </tr>
        <tr>
         <td class="p-2 font-bold bg-gray-50">ржмрж░рзНрждржорж╛ржи ржарж┐ржХрж╛ржирж╛</td>
         <td class="p-2" id="v-current-address"></td>
        </tr>
       </tbody>
      </table><!-- Admission Info Table -->
      <table class="print-table w-full border-collapse mb-6 text-sm">
       <thead>
        <tr class="bg-gradient-to-r from-emerald-700 to-amber-600 text-white">
         <th colspan="4" class="p-2 text-left font-bengali">ржнрж░рзНрждрж┐ рж╕ржВржХрзНрж░рж╛ржирзНржд рждржерзНржп | Admission Details</th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td class="p-2 font-bold bg-gray-50 w-1/4">ржнрж░рзНрждрж┐ржХрзГржд рж╢рзНрж░рзЗржгрзА</td>
         <td class="p-2 font-bold text-emerald-700" id="v-admitted-class"></td>
         <td class="p-2 font-bold bg-gray-50 w-1/4">рж╢рж╛ржЦрж╛</td>
         <td class="p-2" id="v-section"></td>
        </tr>
        <tr>
         <td class="p-2 font-bold bg-gray-50">рж░рзЛрж▓ ржиржорзНржмрж░</td>
         <td class="p-2 font-bold text-amber-600" id="v-roll"></td>
         <td class="p-2 font-bold bg-gray-50">рж╣рзЛржпрж╝рж╛ржЯрж╕ржЕрзНржпрж╛ржк</td>
         <td class="p-2" id="v-whatsapp"></td>
        </tr>
       </tbody>
      </table><!-- Signatures -->
      <div class="grid grid-cols-3 gap-4 mt-8 pt-4 border-t-2 border-dashed border-gray-300">
       <div class="text-center">
        <div class="h-16 border-b-2 border-gray-400 mb-2"></div>
        <p class="text-sm font-bold font-bengali">ржЕржнрж┐ржнрж╛ржмржХрзЗрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░</p>
        <p class="text-xs text-gray-500">Guardian's Signature</p>
       </div>
       <div class="text-center">
        <div class="h-16 border-b-2 border-gray-400 mb-2"></div>
        <p class="text-sm font-bold font-bengali">рж╢рзНрж░рзЗржгрзА рж╢рж┐ржХрзНрж╖ржХ</p>
        <p class="text-xs text-gray-500">Class Teacher</p>
       </div>
       <div class="text-center">
        <div class="h-16 border-b-2 border-gray-400 mb-2"></div>
        <p class="text-sm font-bold font-bengali">ржЕржзрзНржпржХрзНрж╖</p>
        <p class="text-xs text-gray-500">Principal</p>
       </div>
      </div><!-- Footer -->
      <div class="mt-6 pt-4 border-t text-center text-xs text-gray-500">
       <p class="font-bengali">ржПржЗ рж░рж╢рж┐ржжржЯрж┐ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзБржиред ржнрж░рзНрждрж┐рж░ рж╕ржоржпрж╝ ржПржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рждрзЗ рж╣ржмрзЗред</p>
       <p>Please keep this voucher safe. It must be presented at the time of admission.</p>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Configuration
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwFNkJ4UU9DHmu8dDwGgST-Xu1kA6ZlTLiHfRclL3fYUR0f62hB_oe9HzFiYCFH0ulY/exec';
    
    // State
    let currentStep = 1;
    const totalSteps = 5;
    let photoData = '';
    let formData = [];
    let nextFormNumber = 1;
    
    // Default Config
    const defaultConfig = {
      institution_name: 'ржжрж╛рж░рзБрж▓ ржорзЛрж╕рзНрждржлрж╛ рж╕рж╛ржГ ржЗрж╕рж▓рж╛ржорзА ржПржХрж╛ржбрзЗржорж┐',
      primary_color: '#0d6e3f',
      secondary_color: '#c9a227',
      text_color: '#1a1a2e',
      background_color: '#f8f9fa',
      card_color: '#ffffff'
    };
    
    // Data Handler for SDK
    const dataHandler = {
      onDataChanged(data) {
        formData = data;
        if (data.length > 0) {
          const maxFormNumber = Math.max(...data.map(d => d.form_number || 0));
          nextFormNumber = maxFormNumber + 1;
        } else {
          nextFormNumber = 1;
        }
        updateFormNumber();
      }
    };
    
    // Element SDK Handler
    const elementHandler = {
      defaultConfig,
      async onConfigChange(config) {
        const title = document.getElementById('header-title');
        if (title) {
          title.textContent = config.institution_name || defaultConfig.institution_name;
        }
        document.documentElement.style.setProperty('--primary-green', config.primary_color || defaultConfig.primary_color);
        document.documentElement.style.setProperty('--secondary-gold', config.secondary_color || defaultConfig.secondary_color);
      },
      mapToCapabilities(config) {
        return {
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => { config.background_color = value; if(window.elementSdk) window.elementSdk.setConfig({ background_color: value }); }
            },
            {
              get: () => config.card_color || defaultConfig.card_color,
              set: (value) => { config.card_color = value; if(window.elementSdk) window.elementSdk.setConfig({ card_color: value }); }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => { config.text_color = value; if(window.elementSdk) window.elementSdk.setConfig({ text_color: value }); }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => { config.primary_color = value; if(window.elementSdk) window.elementSdk.setConfig({ primary_color: value }); }
            },
            {
              get: () => config.secondary_color || defaultConfig.secondary_color,
              set: (value) => { config.secondary_color = value; if(window.elementSdk) window.elementSdk.setConfig({ secondary_color: value }); }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        };
      },
      mapToEditPanelValues(config) {
        return new Map([
          ['institution_name', config.institution_name || defaultConfig.institution_name]
        ]);
      }
    };
    
    // Initialize
    async function init() {
      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init(elementHandler);
      }
      
      // Initialize Data SDK
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize data SDK');
        }
      }
      
      // Set today's date
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('submission-date').value = today;
      
      // Setup form submission
      document.getElementById('admission-form').addEventListener('submit', handleSubmit);
      
      updateFormNumber();
    }
    
    function updateFormNumber() {
      const formNumberEl = document.getElementById('form-number');
      if (formNumberEl) {
        formNumberEl.textContent = String(nextFormNumber).padStart(3, '0');
      }
    }
    
    // Step Navigation
    function goToStep(step) {
      if (step < 1 || step > totalSteps) return;
      
      // Hide all steps
      document.querySelectorAll('.form-step').forEach(el => el.classList.add('hidden'));
      
      // Show target step
      document.getElementById(`step-${step}`).classList.remove('hidden');
      
      // Update indicators
      document.querySelectorAll('.step-indicator').forEach((el, index) => {
        el.classList.remove('active', 'completed');
        if (index + 1 < step) {
          el.classList.add('completed');
        } else if (index + 1 === step) {
          el.classList.add('active');
        }
      });
      
      currentStep = step;
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    function nextStep() {
      if (currentStep < totalSteps) {
        goToStep(currentStep + 1);
      }
    }
    
    function prevStep() {
      if (currentStep > 1) {
        goToStep(currentStep - 1);
      }
    }
    
    // Photo Upload
    function handlePhotoUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        photoData = e.target.result;
        
        const preview = document.getElementById('photo-preview');
        const previewContainer = document.getElementById('photo-preview-container');
        const placeholder = document.getElementById('photo-placeholder');
        const uploadZone = document.getElementById('photo-upload-zone');
        
        preview.src = photoData;
        previewContainer.classList.remove('hidden');
        placeholder.classList.add('hidden');
        uploadZone.classList.add('has-photo');
      };
      reader.readAsDataURL(file);
    }
    
    // Copy Address
    function copyPermanentAddress() {
      const checkbox = document.getElementById('same-as-permanent');
      if (checkbox.checked) {
        document.getElementById('current-village').value = document.getElementById('permanent-village').value;
        document.getElementById('current-po').value = document.getElementById('permanent-po').value;
        document.getElementById('current-upazila').value = document.getElementById('permanent-upazila').value;
        document.getElementById('current-district').value = document.getElementById('permanent-district').value;
      }
    }
    
    // Toast Notification
    function showToast(message, type = 'success') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = `toast px-6 py-4 rounded-lg shadow-lg mb-2 ${type === 'success' ? 'bg-emerald-600' : 'bg-red-600'} text-white font-medium`;
      toast.textContent = message;
      container.appendChild(toast);
      
      setTimeout(() => {
        toast.remove();
      }, 4000);
    }
    
    // Validation
    function validateForm() {
      const requiredFields = [
        { id: 'submission-date', name: 'рждрж╛рж░рж┐ржЦ' },
        { id: 'date-of-birth', name: 'ржЬржирзНржо рждрж╛рж░рж┐ржЦ' },
        { id: 'gender', name: 'рж▓рж┐ржЩрзНржЧ' },
        { id: 'father-mobile', name: 'ржкрж┐рждрж╛рж░ ржорзЛржмрж╛ржЗрж▓' },
        { id: 'mother-mobile', name: 'ржорж╛рждрж╛рж░ ржорзЛржмрж╛ржЗрж▓' }
      ];
      
      const missingFields = [];
      
      // Check photo
      if (!photoData) {
        missingFields.push('ржЫржмрж┐');
      }
      
      requiredFields.forEach(field => {
        const el = document.getElementById(field.id);
        if (!el.value.trim()) {
          missingFields.push(field.name);
        }
      });
      
      // Check declaration
      if (!document.getElementById('declaration').checked) {
        missingFields.push('ржШрзЛрж╖ржгрж╛');
      }
      
      if (missingFields.length > 0) {
        showToast(`ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржкрзВрж░ржг ржХрж░рзБржи: ${missingFields.join(', ')}`, 'error');
        return false;
      }
      
      return true;
    }
    
    // Form Submission
    async function handleSubmit(e) {
      e.preventDefault();
      
      if (!validateForm()) return;
      
      // Check data limit
      if (formData.length >= 999) {
        showToast('рж╕рж░рзНржмрзЛржЪрзНржЪ рзпрзпрзпржЯрж┐ ржлрж░ржо ржЬржорж╛ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржкрзНрж░рж╢рж╛рж╕ржирзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред', 'error');
        return;
      }
      
      const submitBtn = document.getElementById('submit-btn');
      const submitText = document.getElementById('submit-text');
      const submitSpinner = document.getElementById('submit-spinner');
      const submitIcon = document.getElementById('submit-icon');
      
      // Show loading
      submitBtn.disabled = true;
      submitText.textContent = 'ржЬржорж╛ рж╣ржЪрзНржЫрзЗ...';
      submitSpinner.classList.remove('hidden');
      submitIcon.classList.add('hidden');
      
      const formDataObj = {
        form_number: nextFormNumber,
        submission_date: document.getElementById('submission-date').value,
        student_name_bn: document.getElementById('student-name-bn').value,
        student_name_en: document.getElementById('student-name-en').value,
        date_of_birth: document.getElementById('date-of-birth').value,
        birth_reg_no: document.getElementById('birth-reg-no').value,
        gender: document.getElementById('gender').value,
        religion: document.getElementById('religion').value,
        nationality: document.getElementById('nationality').value,
        father_name_bn: document.getElementById('father-name-bn').value,
        father_name_en: document.getElementById('father-name-en').value,
        father_occupation: document.getElementById('father-occupation').value,
        father_mobile: document.getElementById('father-mobile').value,
        father_nid: document.getElementById('father-nid').value,
        father_dob: document.getElementById('father-dob').value,
        mother_name_bn: document.getElementById('mother-name-bn').value,
        mother_name_en: document.getElementById('mother-name-en').value,
        mother_occupation: document.getElementById('mother-occupation').value,
        mother_mobile: document.getElementById('mother-mobile').value,
        mother_nid: document.getElementById('mother-nid').value,
        mother_dob: document.getElementById('mother-dob').value,
        permanent_village: document.getElementById('permanent-village').value,
        permanent_po: document.getElementById('permanent-po').value,
        permanent_upazila: document.getElementById('permanent-upazila').value,
        permanent_district: document.getElementById('permanent-district').value,
        current_village: document.getElementById('current-village').value,
        current_po: document.getElementById('current-po').value,
        current_upazila: document.getElementById('current-upazila').value,
        current_district: document.getElementById('current-district').value,
        guardian_name: document.getElementById('guardian-name').value,
        guardian_relation: document.getElementById('guardian-relation').value,
        guardian_occupation: document.getElementById('guardian-occupation').value,
        guardian_nid: document.getElementById('guardian-nid').value,
        guardian_dob: document.getElementById('guardian-dob').value,
        guardian_mobile: document.getElementById('guardian-mobile').value,
        prev_school_name: document.getElementById('prev-school-name').value,
        prev_school_address: document.getElementById('prev-school-address').value,
        prev_class: document.getElementById('prev-class').value,
        prev_roll: document.getElementById('prev-roll').value,
        tc_no: document.getElementById('tc-no').value,
        whatsapp_number: document.getElementById('whatsapp-number').value,
        siblings_in_school: document.getElementById('siblings-in-school').value,
        admitted_class: document.getElementById('admitted-class').value,
        section: document.getElementById('section').value,
        assigned_roll: document.getElementById('assigned-roll').value,
        photo_data: photoData ? photoData : '',
        status: 'Submitted'
      };
      
      try {
        // Save to Data SDK
        if (window.dataSdk) {
          const result = await window.dataSdk.create(formDataObj);
          if (!result.isOk) {
            throw new Error('Failed to save data');
          }
        }
        
        // Try to send to Google Sheets (optional)
        if (SCRIPT_URL !== 'YOUR_APPS_SCRIPT_URL_HERE') {
          try {
            await fetch(SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(formDataObj)
            });
          } catch (err) {
            console.log('Google Sheets sync skipped');
          }
        }
        
        // Save to localStorage as backup
        const localData = JSON.parse(localStorage.getItem('admissionForms') || '[]');
        localData.push({ ...formDataObj, photo_data: photoData, timestamp: new Date().toISOString() });
        localStorage.setItem('admissionForms', JSON.stringify(localData));
        
        showToast('ржлрж░ржо рж╕ржлрж▓ржнрж╛ржмрзЗ ржЬржорж╛ рж╣ржпрж╝рзЗржЫрзЗ!', 'success');
        
        // Show voucher
        populateVoucher(formDataObj);
        
      } catch (error) {
        showToast('ржлрж░ржо ржЬржорж╛ ржжрж┐рждрзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред', 'error');
        
        // Reset button
        submitBtn.disabled = false;
        submitText.textContent = 'ржлрж░ржо ржЬржорж╛ ржжрж┐ржи';
        submitSpinner.classList.add('hidden');
        submitIcon.classList.remove('hidden');
      }
    }
    
    // Populate Voucher
    function populateVoucher(data) {
      document.getElementById('voucher-form-no').textContent = String(data.form_number).padStart(3, '0');
      document.getElementById('voucher-date').textContent = formatDate(data.submission_date);
      
      document.getElementById('v-student-name-bn').textContent = data.student_name_bn || '-';
      document.getElementById('v-student-name-en').textContent = data.student_name_en || '-';
      document.getElementById('v-dob').textContent = formatDate(data.date_of_birth);
      document.getElementById('v-gender').textContent = data.gender === 'male' ? 'ржкрзБрж░рзБрж╖' : 'ржорж╣рж┐рж▓рж╛';
      document.getElementById('v-birth-reg').textContent = data.birth_reg_no || '-';
      document.getElementById('v-nationality').textContent = data.nationality;
      
      document.getElementById('v-father-name').textContent = `${data.father_name_bn || '-'} (${data.father_name_en || '-'})`;
      document.getElementById('v-father-mobile').textContent = data.father_mobile || '-';
      document.getElementById('v-mother-name').textContent = `${data.mother_name_bn || '-'} (${data.mother_name_en || '-'})`;
      document.getElementById('v-mother-mobile').textContent = data.mother_mobile || '-';
      
      const permAddr = [data.permanent_village, data.permanent_po, data.permanent_upazila, data.permanent_district].filter(Boolean).join(', ');
      const currAddr = [data.current_village, data.current_po, data.current_upazila, data.current_district].filter(Boolean).join(', ');
      document.getElementById('v-permanent-address').textContent = permAddr || '-';
      document.getElementById('v-current-address').textContent = currAddr || '-';
      
      document.getElementById('v-admitted-class').textContent = data.admitted_class || 'ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╣ржпрж╝ржирж┐';
      document.getElementById('v-section').textContent = data.section || '-';
      document.getElementById('v-roll').textContent = data.assigned_roll || 'ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╣ржпрж╝ржирж┐';
      document.getElementById('v-whatsapp').textContent = data.whatsapp_number || '-';
      
      // Photo
      const photoContainer = document.getElementById('voucher-photo');
      if (photoData) {
        photoContainer.innerHTML = `<img src="${photoData}" class="w-full h-full object-cover" alt="Student Photo">`;
      }
      
      // Show voucher, hide form
      document.getElementById('form-container').classList.add('hidden');
      document.getElementById('print-voucher-container').classList.remove('hidden');
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Format Date
    function formatDate(dateStr) {
      if (!dateStr) return '-';
      const date = new Date(dateStr);
      return date.toLocaleDateString('bn-BD', { year: 'numeric', month: 'long', day: 'numeric' });
    }
    
    // Show New Form
    function showNewForm() {
      document.getElementById('form-container').classList.remove('hidden');
      document.getElementById('print-voucher-container').classList.add('hidden');
      
      // Reset form
      document.getElementById('admission-form').reset();
      photoData = '';
      
      // Reset photo preview
      const preview = document.getElementById('photo-preview');
      const previewContainer = document.getElementById('photo-preview-container');
      const placeholder = document.getElementById('photo-placeholder');
      const uploadZone = document.getElementById('photo-upload-zone');
      
      previewContainer.classList.add('hidden');
      placeholder.classList.remove('hidden');
      uploadZone.classList.remove('has-photo');
      
      // Reset defaults
      document.getElementById('religion').value = 'ржЗрж╕рж▓рж╛ржо';
      document.getElementById('nationality').value = 'ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзА';
      document.getElementById('submission-date').value = new Date().toISOString().split('T')[0];
      
      // Reset button
      const submitBtn = document.getElementById('submit-btn');
      const submitText = document.getElementById('submit-text');
      const submitSpinner = document.getElementById('submit-spinner');
      const submitIcon = document.getElementById('submit-icon');
      
      submitBtn.disabled = false;
      submitText.textContent = 'ржлрж░ржо ржЬржорж╛ ржжрж┐ржи';
      submitSpinner.classList.add('hidden');
      submitIcon.classList.remove('hidden');
      
      // Go to step 1
      goToStep(1);
      
      // Update form number
      updateFormNumber();
    }
    
    // Initialize on load
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce568a6a4a85807',t:'MTc3MTE2NDgzNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
